{% capture carousel_id %}
{{ section.settings.id }}-carousel
{% endcapture %}

<div id="{{ carousel_id }}" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
        {% for block in section.blocks %}
            {% case block.type %}
                {% when "carousel_slide" %}
                    <button type="button"
                    {% if forloop.first == true %} class="active" {% endif %}
                    data-bs-target="#{{ carousel_id }}"
                    data-bs-slide-to="{{ forloop.index0 }}"
                    aria-current="true"
                    aria-label="Slide {{ forloop.index }}"></button>
            {% endcase %}
        {% endfor %}
    </div>
    <div class="carousel-inner">
        {% for block in section.blocks %}
            {% case block.type %}
                {% when "carousel_slide" %}
                    <div class="carousel-item {% if forloop.first == true %} active {% endif %}">
                        <img src="{{ block.settings.slide_image | img_url: '1024x' }}"
                            class="d-block w-100"
                            alt="{{}}"></img>
                        <div class="carousel-caption d-none d-md-block">
                            <h5>{{ block.settings.slide_text }}</h5>
                            <p>{{ block.settings.slide_text_descriptor }}</p>
                        </div>
                    </div>
            {% endcase %}
        {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

{% schema %}

{
    "name" : "Carousel",
    "max_blocks" : 5,
    "settings" : [
        {
            "id" : "id",
            "type" : "text",
            "label" : "The ID of the carousel",
            "default" : "main"
        }
    ],
    "blocks" : [
        {
            "name" : "Carousel Slide",
            "type" : "carousel_slide",
            "settings" : [
                {
                    "id" : "slide_image",
                    "type" : "image_picker",
                    "label" : "Slide Image"
                },
                {
                    "id" : "slide_text",
                    "type" : "text",
                    "label" : "Slide Text",
                    "default" : "Placeholder slide text"
                },
                {
                    "id" : "slide_text_descriptor",
                    "type" : "text",
                    "label" : "Slide Descriptor",
                    "default" : "Some representative placeholder content."
                }
            ]
        }
    ],
    "presets" : [
    ]
}

{% endschema %}